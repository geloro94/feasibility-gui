<mat-accordion>
  <mat-expansion-panel expanded fxFill class="mat-elevation-z4 padding-top-2 border-design">
    <mat-expansion-panel-header class="padding-top-2 height-3 padding-left-0">
      <mat-panel-title class="mat-expansion-panel-content align-items-start">
        <div fxFill fxLayout="row">
          <div fxFlex="13" *ngIf="isinvalid">
            <div class="invalid-Criterion">
              <img src="assets/img/alert.png" alt="Validation Alert" />
            </div>
          </div>
          <div class="padding-left-2 criterion-font-zize" fxFlex="90">{{ criterion.display }}</div>
        </div>
      </mat-panel-title>
      <div *ngIf="showCancelButton" class="cancel-button">
        <button class="cancel-button" type="button" mat-icon-button (click)="doDelete()">
          <fa-icon icon="trash"></fa-icon>
        </button>
      </div>
      <div *ngIf="showCancelButton">
        <button class="cancel-button" type="button" mat-icon-button (click)="openDetailsPopUp()">
          <fa-icon icon="edit"></fa-icon>
        </button>
      </div>
    </mat-expansion-panel-header>
    <hr />
    <div
      *ngIf="criterion.timeRestriction.minDate"
      fxLayout="row"
      class="mat-elevation-z1 font-time-reestriction border-design-filter time-restriction-container"
    >
      <num-display-time-restriction
        *ngIf="featureService.useFeatureTimeRestriction()"
        [timeRestriction]="criterion.timeRestriction"
      >
      </num-display-time-restriction>
    </div>
    <div
      *ngFor="let filter of getAttributeFilters()"
      fxLayout="column"
      class="mat-elevation-z1 font-time-reestriction border-design-filter time-restriction-container"
    >
      <num-display-value-filter [filter]="filter"> </num-display-value-filter>
    </div>
    <div
      fxLayout="column"
      *ngFor="let filter of getValueFilters()"
      class="mat-elevation-z1 font-time-reestriction border-design-filter time-restriction-container"
    >
      <num-display-value-filter [filter]="filter"> </num-display-value-filter>
    </div>
    <ng-container *ngIf="searchType === 'querybuilder'">
      <div *ngIf="criterion.linkedCriteria.length > 0" class="linked-criteria">
        <div class="linked-header">
          {{ 'QUERYBUILDER.DISPLAY.REFERENCED_CRITERIA' | translate }}
        </div>
        <num-display-linked-criterion
          *ngFor="let linkedCrit of criterion.linkedCriteria"
          [criterion]="linkedCrit"
          [query]="query"
        ></num-display-linked-criterion>
      </div>
    </ng-container>
  </mat-expansion-panel>
</mat-accordion>
