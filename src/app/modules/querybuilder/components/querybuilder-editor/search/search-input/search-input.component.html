<div
  class="container-search-input"
  cdkOverlayOrigin
  #trigger="cdkOverlayOrigin"
  [ngClass]="{ 'show-above-overlay': isOverlayOpen }"
>
  <div *ngIf="searchType === 'dataselection'" class="header-label-dataselection">
    {{ 'DATASELECTION.SEARCH.CRITERIA' | translate }}
  </div>
  <div fxLayout="row" fxLayoutAlign="space-evenly start">
    <mat-form-field class="input-field" fxFill>
      <mat-label>{{ 'QUERYBUILDER.SEARCH.LABEL' | translate }}</mat-label>
      <fa-icon matIconPrefix size="2x" icon="search"></fa-icon>
      <!--suppress HtmlFormInputWithoutLabel -->
      <input matInput type="text" [(ngModel)]="search" />
      <button mat-button matSuffix (click)="switchSearchMode(); $event.stopPropagation()">
        <fa-icon *ngIf="isOverlayOpen" matIconSuffix size="2x" icon="chevron-up"></fa-icon>
        <fa-icon *ngIf="!isOverlayOpen" matIconSuffix size="2x" icon="chevron-down"></fa-icon>
      </button>
      <button mat-button *ngIf="search" matSuffix aria-label="Clear" (click)="search = ''">
        <fa-icon size="2x" icon="times"></fa-icon>
      </button>
      <mat-divider [vertical]="true" class="display-inline-divider"></mat-divider>
    </mat-form-field>
  </div>
</div>

<ng-template
  cdkConnectedOverlay
  cdkConnectedOverlayHasBackdrop
  [cdkConnectedOverlayPositions]="positions"
  [cdkConnectedOverlayOrigin]="trigger"
  [cdkConnectedOverlayOpen]="isOverlayOpen"
>
  <num-search-tree-overlay-content
    *ngIf="searchMode === 'tree'"
    [critType]="critType"
    [query]="query"
    [searchType]="searchType"
    (closeOverlay)="closeOverlay($event)"
  >
  </num-search-tree-overlay-content>
  <num-search-text-overlay-content
    *ngIf="searchMode === 'text'"
    [text]="search"
    [critType]="critType"
    [query]="query"
    [searchType]="searchType"
    (switchSearchMode)="switchSearchMode()"
    (closeOverlay)="closeOverlay($event)"
  >
  </num-search-text-overlay-content>
</ng-template>
